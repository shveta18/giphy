<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <title>Giphy Homework</title>
</head>

<body>
    <div id="char-buttons"></div>


    <form>
        <div class="form-group">
            <label for="giphy-input">Search for Harry Potter characters!</label>
            <input type="text" id="char-input"><br>
            <button type="button" class="btn btn-primary search-btn">Search</button>
        </div>


    </form>
    <div class="results"></div>



    <script>
        // create an array with initial values of buttons I want to be displayed by default
        var harryPotter = ["Harry", "Hermione", "Ron"];

        // function to query the gif website whenever a button is clicked on the page.
        function displayGif() {

            var character = $(this).attr("value");
            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + character + "&limit=10" + "&rating=g" + "&apikey=DEmjiTN7d8LF22QWBRFgQZ277D9hik3T";

            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function (response) {
                console.log(response);
                var results = response.data

                for (var i = 0; results.length; i++) {

                    var imageURL = response.data[i].url;
                    console.log("the url is: " + imageURL);

                    var gifImage = $("<img>");
                    gifImage.attr("src", imageURL);

                    $(".results").append("Rating: " + response.data[i].rating);
                    $(".results").append(gifImage);
                }


            });
        }

        // create a function to create the buttons for the values in the object harryPotter

        function createButtons() {

            $("#char-buttons").empty();

            for (var i = 0; i < harryPotter.length; i++) {
                var button = $("<button>");
                button.attr({ "class": "gif-button", "value": harryPotter[i] });
                console.log(button);
                button.text(harryPotter[i]);
                $("#char-buttons").append(button);
            }

        }
        createButtons();




        // Created a function to create a button when the user searches for something
        $(".search-btn").on("click", function (event) {
            event.preventDefault();

            var charSearch = $("#char-input").val().trim();
            harryPotter.push(charSearch);
            createButtons();

        });


        // start the click event listener - pull gifs - whenever any of the buttons are clicked
        $(document).on("click", ".gif-button", displayGif);







    </script>

</body>

</html>